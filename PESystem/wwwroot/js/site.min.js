function applyPerformanceMode(){const n=document.body;if(n){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,i=navigator.hardwareConcurrency&&navigator.hardwareConcurrency<=4,r=navigator.deviceMemory&&navigator.deviceMemory<=4;(t||i||r)&&n.classList.add("reduced-effects")}}function setupSidebar(){const n=document.getElementById("sidebar"),o=document.querySelector(".dashboard-stage"),t=document.getElementById("toggleSidebarFixed"),f=document.querySelector(".fixed-checkbox i"),s=document.getElementById("sidebarToggle"),h=document.documentElement;if(!n||!o||!t){console.error("Missing sidebar/dom elements");return}if(!setupSidebar.initialized){setupSidebar.initialized=!0;const i=()=>window.innerWidth<768,r=t=>{const r=i(),u=t&&!r;if(h.classList.toggle("sidebar-expanded",u),r){n.classList.remove("open","sidebar-hover");return}n.classList.remove("mobile-show");n.classList.toggle("open",t)};s?.addEventListener("click",()=>{n.classList.toggle("mobile-show")});const e=n=>{f?.classList.toggle("ri-record-circle-line",n),f?.classList.toggle("ri-checkbox-blank-circle-line",!n)},c=()=>{try{return localStorage.getItem("isSidebarFixed")==="true"}catch(n){return console.warn("Unable to read sidebar fixed state",n),!1}},l=n=>{try{localStorage.setItem("isSidebarFixed",n)}catch(t){console.warn("Unable to persist sidebar fixed state",t)}},u=c();t.checked=u;r(u);e(u);t.addEventListener("change",n=>{const t=n.target.checked;l(t);r(t);e(t)});n.addEventListener("mouseenter",()=>{t.checked||i()||n.classList.add("sidebar-hover")});n.addEventListener("mouseleave",()=>{t.checked||i()||n.classList.remove("sidebar-hover")});window.addEventListener("resize",()=>{r(t.checked)})}}function setupUserInfo(){const t=document.getElementById("avatarBtn"),n=document.getElementById("userInfoCard");t&&n&&(t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),n.classList.toggle("show")}),document.addEventListener("click",i=>{n.contains(i.target)||t.contains(i.target)||n.classList.remove("show")}),window.addEventListener("resize",()=>{n.classList.remove("show")}))}function showError(n){Swal.fire({icon:"error",title:"Lá»—i",text:n})}function showSuccess(n){Swal.fire({icon:"success",title:n})}function showWarning(n){Swal.fire({icon:"warning",title:n})}function showInfo(n){Swal.fire({icon:"info",title:n})}function showSpinner(){document.getElementById("spinner-overlay").style.display="flex"}function hideSpinner(){const n=document.getElementById("spinner-overlay");n&&(n.style.display="none");clearOrphanModalArtifacts()}function setupModalGuards(){clearOrphanModalArtifacts();syncModalStacking();document.addEventListener("show.bs.modal",()=>{clearOrphanModalArtifacts(),setTimeout(syncModalStacking,0)});document.addEventListener("shown.bs.modal",syncModalStacking);document.addEventListener("hidden.bs.modal",()=>{clearOrphanModalArtifacts(),syncModalStacking()})}function clearOrphanModalArtifacts(){const n=document.querySelectorAll(".modal.show");n.length===0&&(document.querySelectorAll(".modal-backdrop").forEach(n=>n.remove()),document.body.classList.remove("modal-open"),document.body.style.removeProperty("padding-right"),document.body.style.removeProperty("overflow"))}function syncModalStacking(){const i=Array.from(document.querySelectorAll(".modal-backdrop")),n=Array.from(document.querySelectorAll(".modal.show")),r=1045,u=1055,t=20;i.forEach((n,i)=>{n.style.zIndex=r+i*t});n.forEach((n,i)=>{n.style.zIndex=u+i*t});n.length>0&&document.body.classList.add("modal-open")}document.addEventListener("DOMContentLoaded",()=>{applyPerformanceMode(),setupSidebar(),setupUserInfo(),setupModalGuards()});