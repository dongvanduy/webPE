@{
    ViewData["Title"] = "Switch Analysis History";
}
@{
    Layout = "~/Areas/ScrapSW/views/Shared/Layout_Scrap_SW.cshtml";
}

@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor

<input type="hidden" id="analysisPerson" value="@User.Identity.Name" />

<div class="row g-4 align-items-stretch">
    <div class="col-lg-4">
        <div class="nvidia-card h-100">
            <div class="nvidia-card-header">
                <h2>Analysis History</h2>
            </div>
            <div class="nvidia-card-body">
                <form class="d-flex flex-column gap-3">
                    <select id="analysis-options" class="form-select">
                        <option selected disabled>SELECT OPTION</option>
                        <option value="INPUT">Input</option>
                        <option value="UPLOAD">Upload file</option>
                    </select>
                </form>
            </div>
        </div>
    </div>

    <div class="col-lg-8">
        <div class="d-flex flex-column gap-4">
            <form id="analysis-input-form" class="hidden scrap-card">
                <h3 class="h5 mb-3 text-uppercase fw-semibold">Input analysis</h3>
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Serial Number</label>
                        <textarea id="analysis-sn-input" class="form-control" rows="6"
                                  placeholder="Input Serial Number (1 row - 1 SN)"></textarea>
                    </div>
                    <div class="col-md-6 d-flex flex-column gap-3">
                        <div>
                            <label class="form-label">Fail Station</label>
                            <input type="text" id="analysis-fail-station" class="form-control" placeholder="Input fail station">
                        </div>
                        <div>
                            <label class="form-label">Error Code</label>
                            <input type="text" id="analysis-error-code" class="form-control" placeholder="Input error code">
                        </div>
                        <div>
                            <label class="form-label">FA</label>
                            <input type="text" id="analysis-fa" class="form-control" placeholder="Input FA">
                        </div>
                    </div>
                    <div class="col-md-6 d-flex flex-column gap-3">
                        <div>
                            <label class="form-label">Status</label>
                            <input type="text" id="analysis-status" class="form-control" placeholder="Input status">
                        </div>
                        <div>
                            <label class="form-label">Owner</label>
                            <input type="text" id="analysis-owner" class="form-control" placeholder="Input owner">
                        </div>
                        <div>
                            <label class="form-label">Customer Owner</label>
                            <input type="text" id="analysis-customer-owner" class="form-control" placeholder="Input customer owner">
                        </div>
                    </div>
                    <div class="col-12 d-flex justify-content-end">
                        <button id="analysis-input-submit" class="btn btn-ne" type="button">Save</button>
                    </div>
                </div>
            </form>

            <form id="analysis-upload-form" class="hidden scrap-card">
                <h3 class="h5 mb-3 text-uppercase fw-semibold">Upload analysis</h3>
                <div class="row g-3 align-items-stretch">
                    <div class="col-md-6">
                        <label class="form-label">Upload Excel File</label>
                        <input type="file" id="analysis-file-input" class="form-control" accept=".xlsx, .xls">
                        <p class="text-muted small mt-2 mb-0">
                            Columns: SERIAL_NUMBER, FAIL_STATION, ERROR_CODE, FA, STATUS, OWNER, CUSTOMER_OWNER.
                        </p>
                    </div>
                    <div class="col-md-6 d-flex flex-column">
                        <p class="text-muted small mb-3">Upload file to create analysis history.</p>
                        <div class="mt-auto d-flex justify-content-end">
                            <button id="analysis-upload-submit" class="btn btn-ne" type="button">Save</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="mt-5 d-flex flex-column gap-4">
    <div id="analysis-history-result" class="hidden scrap-card"></div>
</div>

@section Scripts {
    <script src="~/assets/areas/scrapsw/js/analysis-history.js?v=@DateTime.Now.Ticks"></script>
}
